# Fruit Catcher Game

**Ангела Танкоска 221105**

---

## 1. Објаснување на играта (апликацијата)

Fruit Catcher е динамична аркадна игра во која играчот кој се движи во долниот дел на екранот (форма со плава боја) има задача да фаќа овошки (форми) што паѓаат од горниот дел на екранот, додека избегнува опасни или лоши овошки (во зависност од режимот). Оваа игра е инспирирана од популарните fruit catcher игри достапни на различни платформи каде што играчот треба да ги тестира своите рефлекси и да постигне што е можно поголем резултат. Овошките што треба да ги фаќа (добрите овошки) се претставени со различни форми и различни бои, додека лошите овошки се претставени само со црна боја и тие треба да се избегнуваат. Доколку играчот сака да ја паузира играта може да го направи тоа со копчето Space.

---

## 2. Функционалности и упатство

**Два режими на играта:**

- **Standard Mode:**  
  Играта трае точно 1 минута. Играчот треба да фати што повеќе добри овошки. Нема животи, нема казна за пропуштени овошки и нема лоши овошки – целта е максимален резултат за даденото време односно да се направи што поголем score во секоја игра додека не истече времето.

- **Poison Mode:**  
  Играчот има ограничен број животи (3). Лошите овошки (со црна боја) го намалуваат бројот на животи. Исто така живот се губи и кога ќе се пропушти добра овошка. Играта завршува кога ќе се изгубат сите три животи.

---

## 3. Опис на решението

### Форми

- **StartForm:**  
  Оваа форма е почетниот екран на играта. На корисникот му овозможува да започне нова игра или да излезе од апликацијата. Служи како вовед и почетна точка за сите корисници.

- **ModeSelectionForm:**  
  Оваа форма се прикажува веднаш по StartForm и овозможува избор на режим на игра Standard или Poison. Со клик на едно од копчињата, корисникот го избира саканиот режим и продолжува кон главната игра.

- **Form1 (GameForm):**  
  Ова е главната форма каде што се одвива целата игра. Ги обработува сите настани поврзани со играта како движење на играчот, појава и движење на овошките, судири, броење поени, животи и време. Содржи тајмер за анимација и ја контролира логиката за крај на играта.

- **GameOverForm:**  
  Оваа форма се прикажува кога играта ќе заврши односно играчот ќе изгуби. На неа се прикажува резултатот на играчот (поените), и се нудат опции за повторно започнување на играта, избор на нов режим или излез од апликацијата.

### Класи

- **Player:**  
  Ја претставува формата (или карактерот) што го контролира играчот. Содржи информации за позицијата и големината на играчот, како и методи за движење и цртање на екранот.

- **Fruit:**  
  Ја претставува секоја овошка што паѓа на екранот. Содржи податоци за позиција, боја, тип (добро/лошо овошје) и форма, како и методи за движење и цртање.

- **GameMode:**  
  Enum што ги дефинира можните режими на играта односно Standard и Poison. Се користи за да се разликува логиката и правилата во различните режими.

---

## 4. Опис на функција од изворниот код

```csharp
private void GameLoop(object sender, EventArgs e)
        {
            // 1. Движење на сите овошки и обработка на судири со играчот или излегување од таблата
            foreach (var fruit in fruits.ToList())
            {
                fruit.MoveDown(fallSpeed); // Овошката се движи надолу со моменталната брзина

                // Проверка дали овошката се судрила со играчот
                if (fruit.Bounds.IntersectsWith(player.Bounds))
                {
                    if (fruit.Type == FruitType.Good)
                    {
                        score = score + 1;  // Зголеми поени за фатена добра овошка
                        fruitsCaught++;    // Зголеми број на фатени овошки
                        if (fruitsCaught % 10 == 0)
                        {
                            fallSpeed++;   // На секои 10 фатени овошки, зголеми ја брзината на паѓање на формата
                        }
                    }
                    else if (selectedMode == GameMode.Poison)
                    {
                        lives = lives-1;       // Во Poison mode, лоша овошка одзема живот
                    }
                    fruits.Remove(fruit);  // Овошката се отстранува од листата (фатена или погодена)
                }
                // Проверка дали овошката излегла надвор од екранот
                else if (fruit.Bounds.Top > this.Height)
                {
                    if (fruit.Type == FruitType.Good && selectedMode == GameMode.Poison)
                        lives--;          // Во Poison mode, пропуштена добра овошка одзема живот
                    fruits.Remove(fruit); // Секогаш се отстранува од листата ако излезе од екранот
                }
            }

            // 2. Генерирање на нова овошка со одредена веројатност
            if (random.Next(0, 20) == 0)
            {
                int x = random.Next(0, this.Width - 30);
                FruitType type = random.Next(0, 5) == 0 ? FruitType.Bad : FruitType.Good;

                // Во Standard mode, секогаш се генерира добра овошка
                if (selectedMode == GameMode.Standard)
                {
                    type = FruitType.Good;
                }

                // Дефинирање на боја според типот на овошка
                Brush color;
                if (type == FruitType.Good)
                {
                    Color randomColor = Color.FromArgb(
                        random.Next(100, 256),
                        random.Next(100, 256),
                        random.Next(100, 256)
                    );
                    color = new SolidBrush(randomColor);
                }
                else
                {
                    color = Brushes.Black;
                }

                // Случаен избор на форма
                ShapeType shape = (ShapeType)random.Next(0, 3);
                Rectangle newBounds;
                bool overlaps;
                // Проверка дали новата овошка се преклопува со други на врвот
                do
                {
                    x = random.Next(0, this.Width - 30);
                    newBounds = new Rectangle(x, 0, 30, 30);
                    overlaps = fruits.Any(f => Math.Abs(f.Bounds.X - x) < 35 && f.Bounds.Y < 60);
                }
                while (overlaps);
                fruits.Add(new Fruit(newBounds, color, type, shape)); // Додавање на нова овошка во листата
            }

            // 3. Проверка за крај на играта во зависност од режимот
            if (selectedMode == GameMode.Poison && lives <= 0)
            {
                EndGame(); // Ако се изгубат сите животи во Poison mode, играта завршува
                return;
            }

            if (selectedMode == GameMode.Standard && timeRemaining <= 0)
            {
                EndGame(); // Ако истече времето во Standard mode, играта завршува
                return;
            }

            // 4. Ажурирање на статус лентата со поени и време/животи
            toolStripStatusLabel1.Text = $"Points: {score}";
            toolStripStatusLabel2.Text = selectedMode == GameMode.Standard
                ? $"Time: {timeRemaining}s"
                : $"Lives: {lives}";

            // 5. Освежување на формата
            this.Invalidate();
        }
```

---

## 5. Screenshots

- **Почетен екран**

  ![Првиот екран што го гледа корисникот кога ќе ја вклучи играта](welcome%20screen.png)

- **Екран за избор на режим**

  ![Екранот за избор на режим за играње](mode%20form.png)

- **Главен екран на играта**

  ![Главниот екран за играње](game%20form.png)

- **Екран кога ќе заврши играта**

  ![Екранот за крај на играта со приказ на score](game%20over%20form.png)

